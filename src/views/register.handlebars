<main>
    <h1 class="bg-secondary text-center text-white w-100" style="margin-bottom: 0px;">REGISTER</h1>
  <section>
    <section class="position-relative">
      <section class="d-flex flex-wrap justify-content-center w-100" id="users"></section>
      <form class="w-50 position-absolute top-50 start-50 translate-middle" style="padding-top: 300px;">
        <div class="form-floating mb-3">
          <input type="email" class="form-control" id="email" placeholder="name@example.com">
          <label for="email">Email</label>
        </div>
        <div class="form-floating mb-3">
          <input type="password" class="form-control" id="password" placeholder="Password">
          <label for="password">Password</label>
        </div>
        <div class="form-floating mb-3">
          <input type="text" class="form-control" id="photo" placeholder="Photo URL">
          <label for="photo">Photo URL</label>
        </div>
        <button type="button" class="btn btn-primary" id="register">REGISTER</button>
      </form>
    </section>
  </section>
</main>

<script src="https://cdn.socket.io/4.7.5/socket.io.min.js"></script>
<script>
  const socket = io();
  socket.on("users", data => {
    const usersSection = document.querySelector("#users");
    usersSection.innerHTML = ""; // Limpiar contenido existente
    data.forEach(user => {
      const userDiv = document.createElement("div");
      userDiv.style.backgroundImage = `url("${user.photo}")`;
      userDiv.classList.add("user-photo");
      usersSection.appendChild(userDiv);
    });
  });

  document.querySelector("#register").addEventListener("click", () => {
    const email = document.querySelector("#email").value;
    const password = document.querySelector("#password").value;
    const photo = document.querySelector("#photo").value;
    socket.emit("register", { email, password, photo });
  });
</script>

<style>
  .user-photo {
    width: 100%;
    height: 100vh;
    background-size: cover;
    background-position: center;
    position: absolute;
    top: 0;
    left: 0;
    z-index: -1;
  }
</style>
